<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Prediction Result</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to right, #e0eafc, #cfdef3);
    }

    .result-container {
      margin-top: 6rem;
      margin-bottom: 4rem;
      padding: 2rem;
    }

    .card-body {
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    .main-prediction {
      font-size: 2rem;
      font-weight: 700;
      color: #1a1a1a;
    }

    .details-card {
      background-color: #ffffff;
      color: #333;
    }

    .healthy {
      background-color: #d4edda;
      border: 1px solid #c3e6cb;
    }

    .details-card ul {
      list-style: none;
      padding-left: 0;
      font-size: 1rem;
    }

    .details-card li {
      margin-bottom: 10px;
    }

    .btn-download {
      margin-top: 30px;
      font-weight: 600;
      background: #28a745;
      border: none;
    }

    .btn-download:hover {
      background-color: #218838;
    }

    .result-img {
      width: 100%;
      max-width: 500px;
      border-radius: 15px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
      margin-top: 30px;
    }

    .footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      text-align: center;
      background: #003973;
      color: white;
      padding: 10px;
    }
  </style>
</head>
<body>

<div class="container result-container text-center">

  <!-- Main Prediction Card -->
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card card-body bg-warning-subtle">
        <h3 class="main-prediction">{{ prediction }}</h3>
      </div>
    </div>
  </div>

  <!-- Disease Details or Healthy Message -->
  {% if prediction != "Normal" %}
  <div class="row justify-content-center mt-4">
    <div class="col-lg-6">
      <div class="card card-body details-card">
        <h4 class="text-primary mb-3">Disease Details</h4>
        <ul>
          <li><strong>Disease:</strong> {{ prediction }}</li>
          <li><strong>Cause:</strong> {{ cause }}</li>
          <li><strong>Treatment:</strong> {{ treatment }}</li>
          <li><strong>Accuracy/Confidence Score:</strong> {{ accuracy }}</li>
        </ul>
      </div>
    </div>
  </div>
  {% else %}
  <div class="row justify-content-center mt-4">
    <div class="col-lg-6">
      <div class="card card-body healthy">
        <h4 class="text-success">Great News!</h4>
        <p>You are healthy. Keep up the great care!</p>
      </div>
    </div>
  </div>
  {% endif %}

  <!-- PDF Download -->
  <form action="{{ url_for('download_pdf') }}" method="POST">
    <input type="hidden" name="prediction" value="{{ prediction }}">
    <input type="hidden" name="cause" value="{{ cause }}">
    <input type="hidden" name="treatment" value="{{ treatment }}">
    <input type="hidden" name="Accuracy" value="{{ accuracy }}">
    <button type="submit" class="btn btn-success btn-download">Download Report as PDF</button>
  </form>

  <!-- Output Image -->
  <img src="{{ url_for('static', filename='output_image.png') }}" alt="Output Image" class="result-img">
  <img src="{{ url_for('static', filename='grad_result.png') }}" alt="Output Gradcam Image" class="result-img">

</div>

<div class="footer">
  &copy; 2025 RetinoDetect AI. All rights reserved.
</div>

</body>
</html>
